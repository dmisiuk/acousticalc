---
epic: 0
story: 0.4
title: "PR Demo Automation & Integration"
status: "Planning"
---

# Story 0.4: PR Demo Automation & Integration

## Story

**As a** developer creating pull requests
**I want** every PR to automatically include embedded demo videos and screenshots
**So that** reviewers can immediately see visual proof of functionality and behavior changes

## Acceptance Criteria

1. **Automated Demo Generation**
   - Given a PR is created from a story branch
   - When CI pipeline runs
   - Then demo videos are automatically generated and embedded in PR

2. **PR Template Integration**
   - Given PR template exists with demo sections
   - When developer creates PR
   - Then demo content is automatically populated in designated sections

3. **Visual Proof Requirements**
   - Given functionality changes exist
   - When demos are generated
   - Then before/after comparisons are shown for bug fixes and feature changes

4. **Demo Content Quality**
   - Given demos are generated
   - When viewing in GitHub PR
   - Then videos show keystroke/mouse overlays and clear visual progression

5. **Automated Artifact Management**
   - Given demo artifacts are generated
   - When PR is created
   - Then artifacts are properly organized and linked in PR description

## Story Tasks

### Implementation Tasks
- [ ] Create GitHub Actions workflow for PR demo automation
- [ ] Implement demo artifact collection and organization
- [ ] Design PR template with embedded demo sections
- [ ] Create automatic demo video embedding system
- [ ] Set up before/after comparison generation for bug fixes

### Testing Requirements
- [ ] Test PR demo generation end-to-end
- [ ] Validate demo artifact organization
- [ ] Verify PR template demo section population
- [ ] Test before/after comparison generation
- [ ] Validate demo embedding in GitHub interface

### Documentation Updates
- [ ] Document PR demo automation process
- [ ] Create troubleshooting guide for demo failures
- [ ] Update contributing guidelines with demo requirements
- [ ] Document demo artifact structure
- [ ] Create example PR with demo content

## Definition of Done

- [ ] Every PR automatically includes demo videos
- [ ] PR template populates demo sections automatically
- [ ] Before/after comparisons work for bug fixes
- [ ] Demo content shows visual input overlays
- [ ] Artifacts are properly organized and accessible
- [ ] Demo generation integrates with existing CI pipeline
- [ ] Documentation covers PR demo process
- [ ] Example PRs demonstrate capability

## Technical Implementation

### GitHub Actions Workflow

**PR Demo Workflow** (`.github/workflows/pr-demo.yml`):
```yaml
name: Generate PR Demo
on:
  pull_request:
    types: [opened, synchronize]

jobs:
  demo:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
      - name: Setup Go
        uses: actions/setup-go@v4
      - name: Run tests with demo recording
      - name: Generate demo videos
      - name: Update PR with demo content
```

### PR Template Enhancement

**Enhanced Template** (`.github/pull_request_template.md`):
```markdown
## Story Reference
- **Story**: [Story X.Y Title](link-to-story)
- **Epic**: [Epic X Title](link-to-epic)

## Demo Content
<!-- Auto-populated by demo automation -->
### Feature Demo
![Demo Video](demos/story-X.Y-demo.gif)

### Before/After (for bug fixes)
| Before | After |
|--------|-------|
| ![Before](demos/before.gif) | ![After](demos/after.gif) |

### Acceptance Criteria Validation
- [ ] AC1: Demo shows...
- [ ] AC2: Video demonstrates...

## Manual Testing Verification
- [ ] Tested on macOS
- [ ] Tested on Linux
- [ ] Tested on Windows
```

### Demo Artifact Structure

```
demos/
├── story-X.Y/
│   ├── demo-main.mp4          # Primary demo video
│   ├── demo-main.gif          # GitHub-optimized GIF
│   ├── screenshots/           # Key screenshots
│   │   ├── before.png
│   │   ├── after.png
│   │   └── feature-X.png
│   ├── acceptance-criteria/   # AC validation videos
│   │   ├── ac1-demo.gif
│   │   └── ac2-demo.gif
│   └── metadata.json         # Demo information
```

### Integration Points

- Triggered by GitHub PR events
- Uses testing infrastructure (Story 0.2)
- Leverages video recording system (Story 0.3)
- Integrates with GitHub workflow automation (Story 0.1)

## Dependencies

- GitHub Actions workflow system (Story 0.1)
- Testing infrastructure with visual artifacts (Story 0.2)
- Video recording and demo system (Story 0.3)
- GitHub repository permissions for PR updates

## Success Metrics

- 100% of PRs include automated demo content
- <5 minutes additional CI time for demo generation
- Zero manual steps required for demo embedding
- >90% demo content completeness in PRs
- Improved PR review speed and confidence

---

*Story 0.4 automates the integration of demo content into every pull request*
*Ensures visual proof of functionality is always available for code review*